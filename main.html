<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ferrari</title>

    <!-- css -->
    <!-- <link rel="stylesheet" href="./css/main.css"> -->
    <link rel="stylesheet" href="./css/navi.css">
    <link rel="stylesheet" href="./css/test.css">

    <!-- font -->
    <link rel="stylesheet" href="./font/font.scss">

    <!-- js -->
    <!-- <script src="./js/main.js"></script> -->

    <!-- reset css -->
    <link href="https://cdn.jsdelivr.net/npm/reset-css@5.0.2/reset.min.css" rel="stylesheet">

    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

</head>
<body>
    <!-- navi -->
    <nav id="nav">
        <div class="navInner">
            <div class="logo"><a href="#"></a></div>
            <div><a href="#">Racing</a></div>
            <div><a href="#">SF-25</a></div>
            <div><a href="#">Team</a></div>
            <div><a href="#">News</a></div>
            <div><a href="#">Partners</a></div>
        </div>
    </nav>

    <!-- Hearo -->
<section id="hearo">
  <div class="swiper">
    <div class="swiper-wrapper">
      <div class="swiper-slide">
          <div class="innerText">
            
            <h3 class="title">SCUDERIA FERRARI</h3>

            <a href="#" class="discover-btn">
              DISCOVER
              <span class="circle">
                <svg viewBox="0 0 36 36">
                  <circle class="bg" cx="18" cy="18" r="16"></circle>
                  <circle class="progress" cx="18" cy="18" r="16"></circle>
                </svg>
              </span>
            </a>

          </div>
        <img src="./img/main/main_01.jpg" alt="메인 비주얼 1">
      </div>

      <div class="swiper-slide">
          <div class="innerText">
            
            <h3 class="title">BORN TO RACE. BUILT TO WIN.</h3>

            <a href="#" class="discover-btn">
              DISCOVER
              <span class="circle">
                <svg viewBox="0 0 36 36">
                  <circle class="bg" cx="18" cy="18" r="16"></circle>
                  <circle class="progress" cx="18" cy="18" r="16"></circle>
                </svg>
              </span>
            </a>

          </div>
        <img src="./img/main/main_02.jpg" alt="메인 비주얼 2">
      </div>

      <div class="swiper-slide">
          <div class="innerText">
            
            <h3 class="title">DRIVEN BY PASSION. DEFINED BY LEGACY</h3>

            <a href="#" class="discover-btn">
              DISCOVER
              <span class="circle">
                <svg viewBox="0 0 36 36">
                  <circle class="bg" cx="18" cy="18" r="16"></circle>
                  <circle class="progress" cx="18" cy="18" r="16"></circle>
                </svg>
              </span>
            </a>

          </div>
          <video src="./img/main/main_03.mp4" autoplay loop muted></video>
      </div>


    </div>
    <!-- pagination -->
    <div class="swiper-pagination"></div>
  </div>
</section>

<section id="full">
  <div class="fullInner">
    <p class="fullTitle">SPEED. INNOVATION. EXCELLENCE.</p>
    <img src="./img/main/full_1.jpg" alt="full 1">
  </div>

  <div class="fullInner">
    <p class="fullTitle right">MOMENTS THAT DEFINE CHAMPIONS.</p>
    <img src="./img/main/full_2.jpg" alt="full 2">
  </div>
</section>

<!-- 드라이버 소개 -->
<section id="driverContainer" class="container">
  <h3 class="title">DRIVER</h3>

  <div class="driver">
  <div class="driverCard">
    <img src="./img/driver/leclerc.png" alt="leclerc">
    <div class="driverInfo">
      <p class="subTitle">Charles Leclerc</p>
      <a href="#" class="discover-btn">
            VIEW MORE
            <span class="circle">
              <svg viewBox="0 0 36 36">
                <circle class="bg" cx="18" cy="18" r="16"></circle>
                <circle class="progress" cx="18" cy="18" r="16"></circle>
              </svg>
            </span>
          </a>
    </div>
  </div>

    <div class="driverCard">
    <img src="./img/driver/lewis.png" alt="lewis">
    <div class="driverInfo">
      <p class="subTitle">Lewis Hamilton</p>
      <a href="#" class="discover-btn">
            VIEW MORE
            <span class="circle">
              <svg viewBox="0 0 36 36">
                <circle class="bg" cx="18" cy="18" r="16"></circle>
                <circle class="progress" cx="18" cy="18" r="16"></circle>
              </svg>
            </span>
          </a>
    </div>
  </div>

</div>
</section>



<!-- swiper -->
<script>
const swiper = new Swiper(".swiper", {
  loop: true,
  // autoplay: { delay: 7000 },
  pagination: {
    el: ".swiper-pagination",
    clickable: true,
    renderBullet: function (index, className) {
      return `
        <span class="${className}">
          <svg viewBox="0 0 36 36">
            <circle class="bg" cx="18" cy="18" r="16"></circle>
            <circle class="progress" cx="18" cy="18" r="16"></circle>
          </svg>
        </span>
      `;
    },
  },
});

// 원형 애니메이션 실행 함수
function runCircleAnimation() {
  const delay = swiper.params.autoplay?.delay || 7000;

  // 모든 bullet progress 초기화
  document.querySelectorAll(".swiper-pagination .progress").forEach(el => {
    el.style.transition = "none";
    el.style.strokeDashoffset = 100;
  });

  // 활성화된 bullet만 채워지게
  const active = document.querySelector(".swiper-pagination-bullet-active .progress");
  if (active) {
    void active.offsetWidth; // 강제 리플로우로 transition 초기화
    active.style.transition = `stroke-dashoffset ${delay / 1000}s linear`;
    active.style.strokeDashoffset = 0;
  }
}

swiper.on("slideChange", runCircleAnimation);
swiper.on("paginationUpdate", runCircleAnimation);

// 초기 실행
runCircleAnimation();

</script>



</body>
</html>