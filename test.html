<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ferrari</title>

    <!-- css -->
    <link rel="stylesheet" href="./css/test.css">
    <link rel="stylesheet" href="./css/navi.css">

    <!-- font -->
    <link rel="stylesheet" href="./font/font.scss">

    <!-- js -->
    <!-- <script src="./js/main.js"></script> -->

    <!-- reset css -->
    <link href="https://cdn.jsdelivr.net/npm/reset-css@5.0.2/reset.min.css" rel="stylesheet">

    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

</head>
<body>
    <!-- navi -->
    <nav id="nav">
        <div class="navInner">
            <div class="logo"><a href="#">logo</a></div>
                <div><a href="#">Racing</a></div>
                <div><a href="#">SF-25</a></div>
                <div><a href="#">Team</a></div>
                <div><a href="#">News</a></div>
                <div><a href="#">Partners</a></div>
        </div>
    </nav>

    <!-- Hearo -->
<section id="hearo">
  <div class="swiper">
    <div class="swiper-wrapper">
      <div class="swiper-slide"><img src="./img/main/main_01.jpg" alt="메인 비주얼 1"></div>
      <div class="swiper-slide"><img src="./img/main/main_02.jpg" alt="메인 비주얼 2"></div>
      <!-- <div class="swiper-slide"><img src="./img/main/main_03.jpg" alt="메인 비주얼 3"></div> -->
    </div>
    <!-- pagination -->
    <div class="swiper-pagination"></div>
  </div>
</section>

    <div>SCUDERIA FERRARI</div>
    <div class="btn">DISCOVER</div>

<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<script>
  var swiper = new Swiper('.swiper', {
  slidesPerView: 1,
  loop: true,
  effect: 'fade',
  speed: 1000,
  
  // 자동 재생 설정
  autoplay: {
    delay: 5000,
    disableOnInteraction: false,
  },
  
  // 페이지네이션 설정
  pagination: {
    el: '.swiper-pagination',
    clickable: true,
    renderBullet: function (index, className) {
      return `
        <span class="${className}">
          <svg viewBox="0 0 36 36">
            <circle class="bg" cx="18" cy="18" r="16"></circle>
            <circle class="progress" cx="18" cy="18" r="16"></circle>
          </svg>
        </span>
      `;
    },
  },

  on: {
    autoplayTimeLeft: function (s, timeLeft, percentage) {
      const progressValue = 100 * (1 - percentage);
      const activeBullet = document.querySelector('.swiper-pagination-bullet-active .progress');
      if (activeBullet) {
        activeBullet.style.strokeDashoffset = progressValue;
      }
    },
    
    // 사용자가 페이지네이션 dot을 클릭했을 때
    paginationUpdate: function (swiper, paginationEl) {
      // 모든 불릿의 애니메이션 초기화
      paginationEl.querySelectorAll('.swiper-pagination-bullet .progress').forEach(el => {
        el.style.transition = 'none';
        el.style.strokeDashoffset = 100;
      });
      
      // 클릭된(새롭게 활성화된) 불릿의 애니메이션 재시작
      const activeBullet = paginationEl.querySelector('.swiper-pagination-bullet-active .progress');
      if (activeBullet) {
        // 다음 프레임에서 트랜지션 적용
        requestAnimationFrame(() => {
          activeBullet.style.transition = `stroke-dashoffset ${swiper.params.autoplay.delay / 1000}s linear`;
          activeBullet.style.strokeDashoffset = 0;
        });
      }
    },
    
    // 슬라이드 전환 시작 시 초기화
    slideChangeTransitionStart: function () {
      document.querySelectorAll('.swiper-pagination-bullet .progress').forEach(el => {
        el.style.transition = 'none';
        el.style.strokeDashoffset = 100;
      });
    }
  }
});
</script>

</body>
</html>